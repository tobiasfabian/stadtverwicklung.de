var c=class extends HTMLElement{static get observedAttributes(){return["current-image"]}imagesCount=null;storage={};isDragging=null;dragX=null;dragForceX=null;dragDeltaX=null;translations={en:{previousImage:"Previous image",nextImage:"Next image",navigationLabel:"Gallery controls"},de:{previousImage:"Vorheriges Bild",nextImage:"N\xE4chstes Bild",navigationLabel:"Galerie-Steuerung"}};constructor(){super();let t=this.closest("[lang]")?.lang,i=this.translations[t]??this.translations.en,s=this.querySelector(":scope > ul");this.imagesCount=s.childElementCount,this.template=Object.assign(document.createElement("template"),{innerHTML:`
				<div class=m-gallery__images>
					${s.outerHTML}
				</div>
				<div class=m-gallery__navigation-buttons>
					<button class=a-button data-shape=circle data-action=previous-image aria-label="${i.previousImage}">\u2190</button>
					<button class=a-button data-shape=circle data-action=next-image aria-label="${i.nextImage}">\u2192</button>
				</div>
				<nav class=m-gallery__navigation aria-label="${i.navigationLabel}">
					<div class=a-pagination data-kind=dots>
						<ul>
							${Array.from({length:this.imagesCount},(e,n)=>n+1).map(e=>`<li><button data-index=${e} data-action=show-image aria-label="${e}"></button></li>`).join("")}
						</ul>
					</div>
				</nav>
			`}),this.imagesElement=this.template.content.querySelector(".m-gallery__images"),this.imagesUlElement=this.imagesElement.querySelector(":scope > ul"),this.itemElements=this.imagesUlElement.querySelectorAll(":scope > li > *"),this.paginationButtonElements=this.template.content.querySelectorAll("[data-action=show-image]"),this.buttonPreviousImageElement=this.template.content.querySelector("[data-action=previous-image]"),this.buttonNextImageElement=this.template.content.querySelector("[data-action=next-image]");let a=e=>{let n=e.getBoundingClientRect(),E=window.innerHeight||document.documentElement.clientHeight,p=window.innerWidth||document.documentElement.clientWidth;return n.top<E&&n.bottom>0&&n.left<p&&n.right>0},o=new IntersectionObserver(e=>{e.forEach(n=>{n.target.toggleAttribute("data-is-intersecting",n.isIntersecting)})},{threshold:.5,rootMargin:"20px",root:this});[...this.itemElements].forEach(e=>{o.observe(e)});let l=e=>{e.preventDefault(),this.isDragging=!0,this.dragXStart=e.screenX,this.scrollXStart=this.imagesUlElement.scrollLeft,this.dragForceX=null,this.dragX=null,this.dragDeltaX=null,Object.assign(this.imagesUlElement.style,{scrollSnapType:"none",scrollBehavior:"auto",cursor:"grabbing"}),Object.assign(document.scrollingElement.style,{cursor:"grabbing"})},u=e=>{this.isDragging&&(this.dragForceX=1-this.dragX/e.screenX,this.dragX=e.screenX,this.dragDeltaX=this.dragXStart-e.screenX,this.imagesUlElement.scroll({left:this.scrollXStart+this.dragDeltaX,behavior:"auto"}))},h=()=>{this.isDragging=!1;let e=this.currentImage;Math.abs(this.dragForceX)>.002&&(this.dragForceX<=0?e+=1:e-=1),this.showImage(e),Object.assign(this.imagesUlElement.style,{cursor:null}),Object.assign(document.scrollingElement.style,{cursor:null}),setTimeout(()=>{this.isDragging===!1&&Object.assign(this.imagesUlElement.style,{scrollSnapType:null,scrollBehavior:null})},700)},d=e=>{a(this.imagesUlElement)&&(e.key==="ArrowLeft"?(e.preventDefault(),this.showImage(this.currentImage-1)):e.key==="ArrowRight"&&(e.preventDefault(),this.showImage(this.currentImage+1)))};this.imagesUlElement.addEventListener("mousedown",l),window.addEventListener("mousemove",u),window.addEventListener("mouseup",h),document.addEventListener("keydown",d),this.paginationButtonElements.forEach(e=>{e.addEventListener("click",()=>{this.currentImage=e.dataset.index})}),this.buttonPreviousImageElement.addEventListener("click",()=>this.showImage(this.currentImage-1)),this.buttonNextImageElement.addEventListener("click",()=>this.showImage(this.currentImage+1)),this.imagesUlElement.addEventListener("scroll",()=>{let e=[...this.itemElements].findIndex(n=>n.getAttribute("data-is-intersecting")!==null);this.currentImage=e+1},{passive:!0}),this.itemElements.forEach((e,n)=>{e.addEventListener("click",()=>{this.dragDeltaX===null&&this.showImage(n+1)})})}get currentImage(){return this.storage.currentImage}set currentImage(t){this.storage.currentImage!==t&&(this.storage.currentImage=t,this.setAttribute("current-image",t))}showImage(t){let i=this.imagesUlElement.children[t-1];if(i){this.currentImage=t;let s=i.getBoundingClientRect().left-this.getBoundingClientRect().left+this.imagesUlElement.scrollLeft;i&&this.imagesUlElement.scroll({left:s,behavior:"smooth"})}}updateNav(){let{paginationButtonElements:t,buttonPreviousImageElement:i,buttonNextImageElement:s,currentImage:a}=this;t.forEach(o=>{let l=parseInt(o.dataset.index,10);o.toggleAttribute("aria-pressed",a===l),o.toggleAttribute("aria-current",a===l)}),i.toggleAttribute("disabled",this.currentImage===1),s.toggleAttribute("disabled",this.currentImage===this.imagesCount)}render(){this.innerHTML="",this.appendChild(this.template.content),this.updateNav()}attributeChangedCallback(t,i,s){if(t==="current-image"){let a=parseInt(s,10);this.currentImage!==a&&(this.showImage(a),this.currentImage=a),this.updateNav()}}connectedCallback(){this.getAttribute("current-image")===null&&(this.currentImage=1),this.render()}};customElements.define("m-gallery",c);var m=class{constructor(t){this.element=t,this.provider=t.dataset.provider,this.iframeElement=t.querySelector("iframe"),this.sessionKey=`consent.${this.provider}`,t.querySelector("button").addEventListener("click",()=>{window.sessionStorage.setItem(this.sessionKey,"1"),[...document.mIframes].filter(s=>s.provider===this.provider).forEach(s=>s.activate())}),window.sessionStorage.getItem(this.sessionKey)==="1"&&this.activate()}activate(){this.element.setAttribute("data-state","active"),this.iframeElement.setAttribute("src",this.iframeElement.dataset.src),this.iframeElement.removeAttribute("data-src")}};document.mIframes=[...document.querySelectorAll(".m-iframe")].map(r=>new m(r));var g=class{constructor(t){this.element=t,this.cookieBannerElement=t.querySelector(".m-video__cookie-banner"),this.iframeElement=t.querySelector("iframe"),t.querySelector("button").addEventListener("click",s=>{s.preventDefault(),this.show()})}show(t=!0){let{element:i,iframeElement:s,cookieBannerElement:a}=this;i.classList.add("-active"),s.removeAttribute("hidden"),s.setAttribute("src",s.dataset.src),t===!0?(i.classList.add("-animate"),a.animate({opacity:0},{delay:150,duration:300}).addEventListener("finish",()=>{a.setAttribute("hidden","")})):a.setAttribute("hidden",""),window._paq?.push(["trackEvent","Video","Show",s.dataset.src])}};document.mVideos=[];document.querySelectorAll(".m-video").forEach(r=>{document.mVideos.push(new g(r))});typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype||await import("./polyfills/popover.min.js");"anchorName"in document.documentElement.style||document.querySelectorAll(".a-nav-item").forEach(r=>{r.addEventListener("mouseenter",()=>{let t=r.popoverTargetElement;if(t){let i=r.getBoundingClientRect();t.style.left=`${i.left}px`,t.style.top=`${i.top+i.height}px`}})});
//# sourceMappingURL=index.js.map
