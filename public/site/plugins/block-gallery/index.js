(function(){"use strict";function o(e,t,n,s,a,i,c,S){var r=typeof e=="function"?e.options:e;return t&&(r.render=t,r.staticRenderFns=n,r._compiled=!0),{exports:e,options:r}}const l={mixins:[{mixins:[{props:{content:{default:()=>({}),type:[Array,Object]},fieldset:{default:()=>({}),type:Object}}},{props:{disabled:Boolean}}],props:{endpoints:{default:()=>({}),type:[Array,Object]},id:String}}],inheritAttrs:!1,methods:{field(e,t=null){let n=null;for(const s of Object.values(this.fieldset.tabs??{}))s.fields[e]&&(n=s.fields[e]);return n??t},open(){this.$emit("open")},update(e){this.$emit("update",{...this.content,...e})}}};var d=function(){var t=this,n=t._self._c;return n("k-block-title",{class:t.$attrs.class,style:t.$attrs.style,attrs:{content:t.content,fieldset:t.fieldset},nativeOn:{dblclick:function(s){return t.$emit("open")}}})},p=[],f=o(l,d,p);const u={extends:f.exports,data(){return{back:this.onBack()??"var(--block-color-back)"}},computed:{captionMarks(){return this.field("caption",{marks:!0}).marks},crop(){return this.content.crop},isEmpty(){var e;return!((e=this.content.images)!=null&&e.length)},ratio(){return this.content.ratio}},methods:{onBack(e){const t=`kirby.galleryBlock.${this.endpoints.field}.${this.id}`;if(e!==void 0)this.back=e,sessionStorage.setItem(t,e);else return sessionStorage.getItem(t)}}};var k=function(){var t=this,n=t._self._c;return n("figure",{staticClass:"k-block-type-gallery-figure",style:{"--block-back":t.back},attrs:{"data-empty":t.isEmpty}},[n("ul",{on:{dblclick:t.open}},[t.isEmpty?t._l(3,function(s){return n("li",{key:s,staticClass:"k-block-type-gallery-placeholder"},[n("k-image-frame",{staticClass:"k-block-type-gallery-frame",attrs:{ratio:t.ratio}})],1)}):[t._l(t.content.images,function(s){return n("li",{key:s.id},[n("k-image-frame",{staticClass:"k-block-type-gallery-frame",attrs:{ratio:t.ratio,cover:t.crop,src:s.url,srcset:s.image.srcset,alt:s.alt}})],1)}),n("k-block-background-dropdown",{attrs:{value:t.back},on:{input:t.onBack}})]],2),t.content.caption?n("k-block-figure-caption",{attrs:{disabled:t.disabled,marks:t.captionMarks,value:t.content.caption},on:{input:function(s){return t.$emit("update",{caption:s})}}}):t._e()],1)},m=[],y=o(u,k,m);const _={extends:y.exports,computed:{crop(){return!0},isEmpty(){var e;return!((e=this.content.items)!=null&&e.length)},ratio(){return this.content.ratio}},methods:{onBack(e){const t=`kirby.galleryBlock.${this.endpoints.field}.${this.id}`;if(e!==void 0)this.back=e,sessionStorage.setItem(t,e);else return sessionStorage.getItem(t)}}};var b=function(){var t=this,n=t._self._c;return n("figure",{staticClass:"k-block-type-gallery-figure",attrs:{"data-empty":t.isEmpty}},[n("ul",{on:{dblclick:t.open}},[t.isEmpty?t._l(3,function(s){return n("li",{key:s,staticClass:"k-block-type-gallery-placeholder"},[n("k-image-frame",{staticClass:"k-block-type-gallery-frame",attrs:{ratio:t.ratio}})],1)}):t._l(t.content.items,function(s){var a,i,c;return n("li",{key:s.id},[n("k-block-figure",{attrs:{caption:s.caption}},[n("k-image-frame",{staticClass:"k-block-type-gallery-frame",attrs:{ratio:t.ratio,cover:t.crop,src:(a=s.image[0])==null?void 0:a.url,srcset:(i=s.image[0])==null?void 0:i.image.srcset,alt:(c=s.image[0])==null?void 0:c.alt}})],1)],1)})],2)])},g=[],h=o(_,b,g);const $=h.exports;window.panel.plugin("tobiaswolf/block-gallery",{components:{"k-block-type-gallery":{extends:$}}})})();
